package com.test.sku.serialization;

import java.io.*;
import java.util.*;

public class SerializeMain {

	public static void main(String[] args) {
		// 문서관리 공유 시스템
		/* 문서를 업로드하여 다른 이용자가 목록을 보고 골라서 파일을 다운로드할 수 있다
		 * 업로드, 다운로드, 검색, 수정, 삭제, 종료
		 * Socket, ServerSocket
		 * 한 문서에 포함되는 속성: 번호, 제목, 파일명, 날짜, 작성자, 파일크기, 파일경로
		 * List<Document>
		 * 디렉토리에 포함된 파일의 리스트 추출하는 방법*/
		//listForFiles();
		searchFile();
		listSerialization();
	} // end of main
	
	private static void listForFiles() {
		String path = "C:/test/";
		File f = new File(path);
		String[] files = f.list();
		for(int i = 0; i < files.length; i++) {
			File tmp = new File(f, files[i]);
			if(tmp.isDirectory()) {
				System.out.println(files[i] + "\t-> Dir ");
			} else {
				System.out.println(files[i] + "\t\t-> File ");
			}
		}
	}
	
	private static void searchFile() {
		String key = "lalala.txt";
		String path = "C:/test";
		
		File f = new File(path);
		File[] files = f.listFiles();
		for(int i = 0; i < files.length; i++) {
			if(files[i].getName().equals(key)) {
				System.out.printf("%s\t %d%n", files[i].getName(), files[i].length());
			}
		}
	}
	
	private static void listSerialization() {
		List<String> names = List.of("jane", "john", "smith", "julie", "sean", "robert");
		for(int i = 0; i < names.size(); i++) {
			System.out.println(names.get(i));
		}
		
		try {
			ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("C:/test/list.ser"));
			oos.writeObject(names);
			oos.close();
			System.out.println("저장 완료");

		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		System.err.println("저장 실패");
	}
}
